<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.13 (458081)"/><meta name="altitude" content="236.1809387207031"/><meta name="author" content="Georgiy Demenchuk"/><meta name="created" content="2020-01-04 12:54:43 +0000"/><meta name="latitude" content="55.6053"/><meta name="longitude" content="37.5434"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-01-05 13:40:56 +0000"/><title>9. Копирование списков.</title></head><body><div>Модуль copy</div><div><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Операция присваивания не копирует объект, он лишь создаёт ссылку на объект. Для изменяемых коллекций, или для коллекций, содержащих изменяемые элементы, часто необходима такая копия, чтобы её можно было изменить, не изменяя оригинал. Данный модуль предоставляет общие (поверхностная и глубокая) операции копирования.</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-en-paragraph:true;">copy.copy</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">(x) - возвращает поверхностную копию x.
</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;-en-paragraph:true;">copy.deepcopy</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">(x) - возвращает полную копию x.</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">Разница между поверхностным и глубоким копированием существенна только для составных объектов, содержащих изменяемые объекты (например, список списков, или словарь, в качестве значений которого - списки или словари):
</span></div><ul style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li><div><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Поверхностная копия</span><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> создает новый составной объект, и затем (по мере возможности) вставляет в него ссылки на объекты, находящиеся в оригинале.</span></div></li><li><div><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">Глубокая копия</span><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"> создает новый составной объект, и затем рекурсивно вставляет в него копии объектов, находящихся в оригинале.</span></div></li></ul><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">Для операции глубокого копирования часто возникают две проблемы, которых нет у операции поверхностного копирования:
</span></div><ul style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li><div><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Рекурсивные объекты (составные объекты, которые явно или неявно содержат ссылки на себя) могут стать причиной рекурсивного цикла;</span></div></li><li><div><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Поскольку глубокая копия копирует всё, она может скопировать слишком много, например, административные структуры данных, которые должны быть разделяемы даже между копиями.</span></div></li></ul><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;-en-paragraph:true;">Функция deepcopy решает эти проблемы путем:
</span></div><ul style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li><div><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Хранения "memo" словаря объектов, скопированных во время текущего прохода копирования;</span></div></li><li><div><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Позволения классам, определенным пользователем, переопределять операцию копирования или набор копируемых компонентов.</span></div></li></ul><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;">---------</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Поверхностная копия изменяемых объектов также может быть создана методом .copy() у list</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Также поверхностная копия может быть осуществлена с помощью среза:</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">x = y[:]</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Понимание разницы между поверхностной и глубокой копией</span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; color: rgb(69, 69, 69); font-family: Helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">Поверхностная: </span><br/></div><div style="text-align: start;"><span style="font-size: 16px; color: rgb(15, 15, 15); font-family: Helvetica; --inversion-type-color: simple;"><img src="9.%20%D0%9A%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%BE%D0%B2..html.resources/Screenshot%202020-01-05%20at%2016.33.53.png" height="650" width="570"/></span><br/></div><div style="text-align: start;"><span style="font-size: 16px; color: rgb(15, 15, 15); font-family: Helvetica; --inversion-type-color: simple;"><br/></span></div><div style="text-align: start;"><span style="font-size: 16px; color: rgb(15, 15, 15); font-family: Helvetica; --inversion-type-color: simple;">Глубокая:</span></div><div style="text-align: start;"><span style="font-size: 16px; color: rgb(15, 15, 15); font-family: Helvetica; --inversion-type-color: simple;"><img src="9.%20%D0%9A%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D1%81%D0%BF%D0%B8%D1%81%D0%BA%D0%BE%D0%B2..html.resources/Screenshot%202020-01-05%20at%2016.34.07.png" height="651" width="571"/></span><br/></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; --inversion-type-color:  simple; color: rgb(15, 15, 15); font-family: Helvetica; font-variant-caps: normal; font-variant-ligatures: normal;"><br/></span></div><div style="font-size: 16px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); margin-top: 1em; margin-bottom: 1em;"><br/></div></body></html>