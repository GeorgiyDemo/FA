<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.13 (458081)"/><meta name="altitude" content="236.2234191894531"/><meta name="author" content="Georgiy Demenchuk"/><meta name="created" content="2020-01-04 13:04:14 +0000"/><meta name="latitude" content="55.60531616210938"/><meta name="longitude" content="37.5434191731263"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-01-16 12:08:58 +0000"/><title>26. Базовые операции для работы с файлами в Python. Использование инструкции with … as для работы с файлами.</title></head><body><div>
<span style="font: 13.0px 'Helvetica Neue';">Файл — именованная область данных на носителе информации. Работа с файлами реализуется средствами операционных систем. Операционная система предоставляет приложениям набор функций и структур (API) для работы с файлами.</span></div><div><span style="font: 13.0px 'Helvetica Neue';"><br/></span></div><div><span style="font: 13.0px 'Helvetica Neue';">
Можно выделить два типа операций с файлом — связанные с его открытием и выполняющиеся без его открытия.</span></div><div><span style="font: 13.0px 'Helvetica Neue';">— Операции первого типа обычно служат для чтения и записи информации или подготовки к чтению или записи.</span></div><div><span style="font: 13.0px 'Helvetica Neue';">— Операции второго типа выполняются с файлом как с «объектом» файловой системы, т.е. для его переименования, копирования, перемещения и т.д.</span></div><div><span style="font: 13.0px 'Helvetica Neue';"><br/></span></div><div><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span></div><div><span style="font-size: 13px;">Для первого типа работы с файлами используется конструкция with open .. as название переменной.</span></div><div><span style="font-size: 13px;">Пример конструкции:</span></div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(197, 134, 192);">with</span> <span style="color: rgb(220, 220, 170);">open</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">"./text.txt"</span><span style="color: rgb(212, 212, 212);">,</span> <span style="color: rgb(206, 145, 120);">"w"</span><span style="color: rgb(212, 212, 212);">)</span> <span style="color: rgb(197, 134, 192);">as</span> <span style="color: rgb(156, 220, 254);">file</span><span style="color: rgb(212, 212, 212);">:</span>
</div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(156, 220, 254);"><span>    </span>file</span><span style="color: rgb(212, 212, 212);">.write(</span><span style="color: rgb(206, 145, 120);">"какие-то там данные"</span><span style="color: rgb(212, 212, 212);">)</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
В функцию open можно передать три параметра: имя файла, режим открытия файла и кодировка при чтении файла, последняя по-умолчанию utf-8.</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;"><br/></span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
Режимы открытия файла:</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
r – открытие на чтение;</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
w – открытие на запись, содержимое файла удаляется, если файла нет, создается новый;</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
a – открытие на дозапись, информация добавляется в конец файла.</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
 </span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Также можно добавить b для работы с файлами в побитовом режиме, те:</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">rb - r для побитовой записи</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">wb - w </span><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-variant-caps: normal; line-height: normal;"> для побитовой записи</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">ab -  a</span><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-variant-caps: normal; line-height: normal;"> для побитовой записи</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-variant-caps: normal; line-height: normal;"><br/></span></div><div><span style="font-size: 13px;">При работе с файлами используется 2 метода: write и read. Как следствие, write используем с аргументом w и a, а read - r</span></div><div><span style="font-size: 13px;">Пример чтения из файла:</span></div><div><span style="font-size: 13px;"><img src="26.%20%D0%91%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8%20%D0%B2%20Python.%20%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8%20with%20%E2%80%A6%20as%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8..html.resources/Screenshot%202020-01-16%20at%2014.57.53.png" height="101" width="425"/></span></div><div><span style="font-size: 13px;">Пример дозаписи в файл:</span></div><div><span style="font-size: 13px;"><img src="26.%20%D0%91%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8%20%D0%B2%20Python.%20%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8%20with%20%E2%80%A6%20as%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8..html.resources/Screenshot%202020-01-16%20at%2014.59.34.png" height="66" width="401"/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">Также существует альтернатива с чтением/записью файлов без использования конструкции with open .. as …:</span></div><div><span style="font-size: 13px;">Пример чтения:</span></div><div><span style="font-size: 13px;"><img src="26.%20%D0%91%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8%20%D0%B2%20Python.%20%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8%20with%20%E2%80%A6%20as%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8..html.resources/Screenshot%202020-01-16%20at%2015.04.31.png" height="123" width="461"/></span></div><div><span style="font-size: 13px;">Пример записи:</span></div><div><span style="font-size: 13px;"><img src="26.%20%D0%91%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B5%20%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%B8%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8%20%D0%B2%20Python.%20%D0%98%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D0%B8%20with%20%E2%80%A6%20as%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D1%81%20%D1%84%D0%B0%D0%B9%D0%BB%D0%B0%D0%BC%D0%B8..html.resources/Screenshot%202020-01-16%20at%2015.07.15.png" height="83" width="555"/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">Недостатком является то, что необходимо вручную закрывать файл с помощью метода file.close(), когда конструкция with open .. as … делает это автоматически.</span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">ПРОГРАММИСТ ПОМНИ! Всегда закрывай файл с помощью f.close, если не используешь конструкцию with open .. as:</span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span><span style="font: 13.0px 'Helvetica Neue';">-------</span></div><div><span style="font: 13.0px 'Helvetica Neue';">Для второго типа работы в Python используется модуль os. Во несколько примеров работы:</span></div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(197, 134, 192);">import</span> <span style="color: rgb(212, 212, 212);">os</span>
</div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(212, 212, 212);">os.remove(</span><span style="color: rgb(206, 145, 120);">"text.txt"</span><span style="color: rgb(212, 212, 212);">)</span> <span style="color: rgb(106, 153, 85);">#удаление файла</span>
</div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(212, 212, 212);">os.mkdir(</span><span style="color: rgb(206, 145, 120);">"DIR"</span><span style="color: rgb(212, 212, 212);">)</span> <span style="color: rgb(106, 153, 85);">#созданеие директтории DIR</span>
</div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(212, 212, 212);">os.rename(</span><span style="color: rgb(206, 145, 120);">"OLD"</span><span style="color: rgb(212, 212, 212);">,</span><span style="color: rgb(206, 145, 120);">"NEW"</span><span style="color: rgb(212, 212, 212);">)</span> <span style="color: rgb(106, 153, 85);">#переименование файла OLD в NEW</span>
</div></body></html>