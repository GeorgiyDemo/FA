<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.13 (458081)"/><meta name="altitude" content="236.2234191894531"/><meta name="author" content="Georgiy Demenchuk"/><meta name="created" content="2020-01-04 13:03:58 +0000"/><meta name="latitude" content="55.6053"/><meta name="longitude" content="37.5434"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2020-01-16 11:32:48 +0000"/><title>25. Обработка исключительных ситуаций в Python. Создание пользовательских исключений и инструкция assert.</title></head><body><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;;">При возникновении исключения работа программы прерывается, и чтобы избежать подобного поведения и обрабатывать исключения в Python, существует конструкция try..except.</span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;;">которая имеет следующее формальное определение:</span></div><div><span style="font-size: 13px;">Общий синтексис конструкции:</span></div><div><span style="font-size: 13px;"><img src="25.%20%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85%20%D1%81%D0%B8%D1%82%D1%83%D0%B0%D1%86%D0%B8%D0%B9%20%D0%B2%20Python.%20%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D1%85%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9%20%D0%B8%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F%20assert..html.resources/Screenshot%202020-01-16%20at%2000.21.06.png" height="269" width="478"/><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">Try - код, который выполняем</span></div><div><span style="font-size: 13px;"><br/></span></div><div>
<span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">В конструкции try/except есть опциональный блок else. Он выполняется в том случае, если не было исключения.</span></div><div><br/></div><div>
<span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Блок finally - он выполняется всегда, независимо от того, было ли исключение или нет.</span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">Except тип_ошибки as e: - ошибка </span><span style="font-size: 13px;">Exception</span><span style="font-size: 13px;">, которую обрабатываем и представляем ее как e. Представление ошибки необходимо для получения ее типа, подробного описания и прочих полей, связанных с ней.</span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">Виды </span><span style="font-size: 13px;">ошибки</span><span style="font-size: 13px;"> в Python3:</span></div><div><span style="font-size: 13px;"><img src="25.%20%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85%20%D1%81%D0%B8%D1%82%D1%83%D0%B0%D1%86%D0%B8%D0%B9%20%D0%B2%20Python.%20%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D1%85%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9%20%D0%B8%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F%20assert..html.resources/7601427.jpg" height="382" width="700"/><br/></span></div><div><span style="font-size: 13px;">Необходимо обратить </span><span style="font-size: 13px;">внимание, что если перехват ошибки не сработал при первом except, то происходит сравнение интерпретатором со вторым и т.д. </span><span style="font-size: 13px;">Причём согласно иерархии выше, можно использовать универсальный перехват с Exception т.к. </span><span style="font-size: 13px;">Все</span><span style="font-size: 13px;"> ошибки наследуются от него.</span></div><div style="background-color: rgb(3, 3, 3); font-size: 12px; white-space: pre; --inversion-type-background-color:  simple; --inversion-type-color:  simple;"><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(197, 134, 192); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">try</span><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(212, 212, 212); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">:</span></div><div style="background-color: rgb(3, 3, 3); font-size: 12px; white-space: pre; --inversion-type-background-color:  simple; --inversion-type-color:  simple;"><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(106, 153, 85); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">    #Код, который пытаемся выполнить</span></div><div style="background-color: rgb(3, 3, 3); font-size: 12px; white-space: pre; --inversion-type-background-color:  simple; --inversion-type-color:  simple;"><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(197, 134, 192); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">except</span><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;" /><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(78, 201, 176); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">Exception</span><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;" /><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(197, 134, 192); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">as</span><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;" /><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(212, 212, 212); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">e:</span></div><div style="background-color: rgb(3, 3, 3); font-size: 12px; white-space: pre; --inversion-type-background-color:  simple; --inversion-type-color:  simple;"><span style="font-size: 12px; --inversion-type-background-color:  simple; --inversion-type-color:  simple; color: rgb(106, 153, 85); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;">    #Ошибка, которая обрабатывается всегда</span><span style="font-size: 13px; --inversion-type-color:  simple; --inversion-type-background-color:  simple; color: rgb(25, 25, 25); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; line-height: 18px;"> </span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">
Для того, чтобы сгенерировать явное исключение, в Python применяется оператор raise. </span><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;;">Пример собственного исключения:</span></div><div><img src="25.%20%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85%20%D1%81%D0%B8%D1%82%D1%83%D0%B0%D1%86%D0%B8%D0%B9%20%D0%B2%20Python.%20%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D1%85%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9%20%D0%B8%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F%20assert..html.resources/Screenshot%202020-01-16%20at%2012.09.01.png" height="168" width="388"/><br/></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Assert</span></div><div>
<span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Assert поверочное выражение, представляет собой средство отладки, которое проверяет условие. Вызывается ошибка AssertionError.</span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">Инструкция assert предназначена для того, чтобы сообщать разработчикам о неустранимых ошибках в программе.</span></div><div><span style="font-size: 13px;"><img src="25.%20%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85%20%D1%81%D0%B8%D1%82%D1%83%D0%B0%D1%86%D0%B8%D0%B9%20%D0%B2%20Python.%20%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D1%85%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9%20%D0%B8%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F%20assert..html.resources/Python%20Assert%20Statement.jpg" height="540" width="720"/></span></div><div><span style="font-size: 13px; font-family: &quot;Helvetica Neue&quot;; font-stretch: normal; font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal;">По факту assert можно записать вот так:</span></div><div><span style="font-size: 12px; --inversion-type-color:  simple; color: rgb(0, 0, 0); font-family: &quot;ubuntu mono&quot;;"><img src="25.%20%D0%9E%D0%B1%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5%D0%BB%D1%8C%D0%BD%D1%8B%D1%85%20%D1%81%D0%B8%D1%82%D1%83%D0%B0%D1%86%D0%B8%D0%B9%20%D0%B2%20Python.%20%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D0%BA%D0%B8%D1%85%20%D0%B8%D1%81%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B9%20%D0%B8%20%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F%20assert..html.resources/Screenshot%202020-01-16%20at%2012.10.47.png" height="96" width="480"/><br/></span></div><div><span style="font-size: 12px; --inversion-type-color: simple;">Но данный синтаксис упрощается до:</span></div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(212, 212, 212);">a =</span> <span style="color: rgb(86, 156, 214);">True</span>
</div><div style="background-color: rgb(3, 3, 3); color: rgb(168, 168, 168); font-family: Menlo, Monaco, &quot;Courier New&quot;, monospace; font-size: 12px; line-height: 18px; white-space: pre; --inversion-type-background-color: simple; --inversion-type-color: simple;"><span style="color: rgb(197, 134, 192);">assert</span> <span style="color: rgb(212, 212, 212);">a ==</span> <span style="color: rgb(86, 156, 214);">False</span> <span style="color: rgb(106, 153, 85);">#AssertionError</span>
</div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">Assert широко используется только для отладки, в релизных версиях программ обычно от него избавляются.</span></div></body></html>